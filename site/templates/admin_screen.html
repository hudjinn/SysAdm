{% import 'flash_msg.html' as flash_msgs %}
<!DOCTYPE html>
<html lang="{{ session['language'] }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ text.adm_panel }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/admin.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/language.css') }}">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>
    {% include 'language.html' %}
    {% include "header.html" %}
    <div class="user-info">
        {% if session.get('user') %}
            <span>{{ session['user'].get('nome', 'Usuário Desconhecido') }} ({{ session['user'].get('email', 'Email não disponível') }})</span> | <a href="/" class="btn-logout">Logout</a>
        {% else %}
            <span>Usuário não logado | </span><a href="/" class="btn-login">Efetuar Login</a>
        {% endif %}
    </div>
    <div id="admin-content">
        <h1>{{ text.adm_panel }}</h1>


        <table id="user-table">
            <thead>
                <tr>
                    <th>CPF</th>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Data de Nascimento</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.cpf }}</td>
                    <td>{{ user.nome }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.dataNasc }}</td>
                    <td class="actions">
                        <button onclick="editUser('{{ user.cpf }}')" class="edit-btn action-btn">Editar</button>
                        <button onclick="deleteUser('{{ user.cpf }}')" class="delete-btn action-btn">Remover</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <button onclick="showCreateUserModal()" class="new-user-btn">+ Novo Cadastro</button>
    </div>

    {{ flash_msgs.render_flash_messages() }}
    <script>
        function showCreateUserModal() {
            // Lógica para exibir um modal com o formulário de criação de usuário.
        }
    
        function editUser(cpf) {
            // Lógica para editar o usuário com o CPF fornecido.
        }
    
        function deleteUser(cpf) {
            // Lógica para deletar o usuário com o CPF fornecido.
        }
    </script>
</body>

</html>
